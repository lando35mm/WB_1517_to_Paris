"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,o=Array(t.length);e<t.length;e++)o[e]=t[e];return o}return Array.from(t)}!function(){function t(){if(h=document.query("main"),m=h.queryAll("section"),g=[h].concat(_toConsumableArray(m)),y){var t=null;document.body.addEventListener("wheel",function(e){e.preventDefault(),null!==t&&t.kill(),t=TweenLite.to({scroll:window.pageYOffset},.1,{scroll:window.pageYOffset+1.25*e.deltaY,onUpdate:function(t){var e=t.target.scroll;return scrollTo(0,e)},onUpdateParams:["{self}"],onComplete:function(){return t=null}})})}window.addEventListener("scroll",e,{passive:!0}),m.forEach(function(t,e){var o=Number.NaN;t.addEventListener("scroll-event",function(t){t.stopPropagation();var e=t.detail.percent,n=Math.max(-1,Math.min(2,e));o!==n?o=n:t.stopImmediatePropagation()}),t.addEventListener("scroll-event",function e(o){o.detail.percent>0&&(ga("send",{hitType:"event",eventCategory:"section",eventAction:"visible",eventLabel:t.getAttribute("data-event-label")}),t.removeEventListener("scroll-event",e))}),t.addEventListener("scroll-event",function(e){var o=e.detail,n=o["top-above-vp-bottom"],i=o["top-above-vp-top"],a=o["bottom-above-vp-bottom"],l=o["bottom-above-vp-top"];t.classList.add(n?"top-above-vp-bottom":"top-below-vp-bottom"),t.classList.remove(n?"top-below-vp-bottom":"top-above-vp-bottom"),t.classList.add(i?"top-above-vp-top":"top-below-vp-top"),t.classList.remove(i?"top-below-vp-top":"top-above-vp-top"),t.classList.add(a?"bottom-above-vp-bottom":"bottom-below-vp-bottom"),t.classList.remove(a?"bottom-below-vp-bottom":"bottom-above-vp-bottom"),t.classList.add(l?"bottom-above-vp-top":"bottom-below-vp-top"),t.classList.remove(l?"bottom-below-vp-top":"bottom-above-vp-top")})}),f.matches?o():(TweenLite.defaultEase=Linear.easeNone,a(),l(),c(),d(),s(),r()),p(),n(),e(),window.addEventListener("hashchange",function(){var t=new Map([["houston",{section:"section-houston",offset:250,target:".video-container"}],["atlanta",{section:"section-atlanta",offset:100,target:".video-container"}],["jacksonville",{section:"section-jacksonville",offset:100,target:".video-container"}],["philadelphia",{section:"section-philadelphia",offset:100,target:".video-container"}],["houston-article",{section:"section-houston",offset:450,target:".copy-opening"}],["atlanta-article",{section:"section-atlanta",offset:450,target:".copy-opening"}],["jacksonville-article",{section:"section-jacksonville",offset:300,target:".copy-opening"}],["philadelphia-article",{section:"section-philadelphia",offset:300,target:".copy-opening"}]]),e=location.hash.substring(1);if(t.has(e)){var o=document.documentElement.scrollTop||document.body.scrollTop,n=void 0;if(f.matches){var i=t.get(e),a=i.section,l=i.target;n=document.getElementById(a).querySelector(l).getBoundingClientRect().top,console.log(n)}else{var r=t.get(e),s=r.section,d=r.offset;n=document.getElementById(s).getBoundingClientRect().top+window.innerHeight*((d+1)/100)-window.innerHeight}var c=Math.min(1,Math.abs(n-o)/2500);TweenLite.to([document.documentElement,document.body],c,{scrollTop:"+="+n,ease:Sine.easeInOut})}}),window.dispatchEvent(new CustomEvent("hashchange")),document.documentElement.classList.add("init")}function e(){g.forEach(function(t){var e=t.getBoundingClientRect(),o=e.top,n=e.bottom,i=-(o-window.innerHeight);t.dispatchEvent(new CustomEvent("scroll-event",{detail:{"top-above-vp-bottom":o<window.innerHeight,"top-above-vp-top":o<0,"bottom-above-vp-bottom":n<=window.innerHeight,"bottom-above-vp-top":n<=0,"top-offset":i,percent:i/t.scrollHeight,vh:100*i/window.innerHeight}}))})}function o(){m.filter(function(t){return"intro"!==t.id}).forEach(function(t){var e=t.query("article");t.queryAll(".slide").forEach(function(t){return e.query(".figure-stub").replaceWith(t)})}),document.queryAll("section:nth-of-type(n+3)").forEach(function(t){t.addEventListener("scroll-event",function(e){e.detail.vh>=200?t.classList.contains("detach-panorama")||t.classList.add("detach-panorama"):t.classList.contains("detach-panorama")&&t.classList.remove("detach-panorama")})})}function n(){m.forEach(function(t){t.addEventListener("scroll-event",function t(e){var o=e.detail.percent,n=e.target;if(!(o<=0)){n.removeEventListener("scroll-event",t);var i=!0,a=!1,l=void 0;try{for(var r,s=n.queryAll(".lazyload")[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var d=r.value;"IMG"===d.nodeName&&(d.setAttribute("sizes",d.getAttribute("data-sizes")),d.setAttribute("srcset",d.getAttribute("data-srcset")),d.setAttribute("src",d.getAttribute("data-src")))}}catch(t){a=!0,l=t}finally{try{!i&&s.return&&s.return()}finally{if(a)throw l}}}})})}function i(t){Array.from(document.getElementById("main-nav").querySelectorAll("li")).forEach(function(t){return t.classList.remove("current")}),t.classList.add("current")}function a(){var t=document.getElementById("main-nav"),e=document.getElementById("main-nav-bar"),o=t.query("li:nth-of-type(1)"),n=t.query("li:nth-of-type(2)"),a=t.query("li:nth-of-type(3)"),l=o.query("b"),r=n.query("b"),s=a.query("b"),d=null;t.queryAll("li").forEach(function(t,e){var o=document.getElementById(t.getAttribute("data-section")),n=+t.getAttribute("data-offset")+1;o&&(t.addEventListener("click",function(){ga("send",{hitType:"event",eventCategory:"nav",eventAction:"click",eventLabel:t.getAttribute("data-section")});var e=document.documentElement.scrollTop||document.body.scrollTop,i=o.getBoundingClientRect().top+window.innerHeight*((n+1)/100)-window.innerHeight,a=Math.min(1,Math.abs(i-e)/2500);TweenLite.to([document.documentElement,document.body],a,{scrollTop:"+="+i,ease:Sine.easeInOut})}),o.addEventListener("scroll-event",function(e){e.detail.vh>=n&&d!==t&&(d=t,i(t))}))});var c=new TimelineLite;c.pause(),TweenLite.set(e,{opacity:0}),TweenLite.set(o,{left:+o.getAttribute("data-x-from")+"vw",top:+o.getAttribute("data-y-from")+"vh"}),TweenLite.set(n,{left:+n.getAttribute("data-x-from")+"vw",top:+n.getAttribute("data-y-from")+"vh"}),TweenLite.set(a,{left:+a.getAttribute("data-x-from")+"vw",top:+a.getAttribute("data-y-from")+"vh"}),c.to(o,65,{left:+o.getAttribute("data-x-to")+"vw",top:+o.getAttribute("data-y-to")+"vh"},100),c.to(n,65,{left:+n.getAttribute("data-x-to")+"vw",top:+n.getAttribute("data-y-to")+"vh"},100),c.to(a,65,{left:+a.getAttribute("data-x-to")+"vw",top:+a.getAttribute("data-y-to")+"vh"},100),c.to([l,r,s],65,{rotationZ:"-=90"},100),c.to(e,65,{opacity:1},100),h.addEventListener("scroll-event",function(t){var e=t.detail.vh;return c.seek(Math.max(0,e))})}function l(){var t=new TimelineLite({paused:!0}),e=document.getElementById("section-intro"),o=e.query("header");t.to(o,50,{opacity:0},100),t.set(o,{display:"none"},150),e.addEventListener("scroll-event",function(e){var o=e.detail.vh;t.seek(Math.max(0,Math.min(t.duration(),o)),!1)})}function r(){function t(){var t=o.getBoundingClientRect();n.style.right=+n.getAttribute("data-right")*t.width+"px",n.style.bottom=+n.getAttribute("data-bottom")*t.height+"px"}var e=document.getElementById("section-philadelphia"),o=e.query(".panorama"),n=e.query(".pin"),i=e.query(".video-container"),a=e.query(".copy-opening"),l=e.query(".feature"),r=l.query("picture:nth-of-type(2) img"),s=l.query("h1"),d=e.querySelectorAll(".slide")[0],c=e.querySelectorAll(".slide")[1],p=e.querySelectorAll(".slide")[2],f=e.query("article"),y=new TimelineLite({paused:!0});TweenLite.set([n,r,s],{opacity:0}),TweenLite.set([o,i],{top:"100vh"}),window.addEventListener("resize",t),t();var h=0;y.call(function(){return u(i)},null,null,h),y.to(i,100,{top:"-=100vh"}),y.call(function(){return v(i)}),y.to(i,100,{top:"-=100vh"},"+=50"),y.call(function(){return u(i)},null,null),y.to(o,100,{top:"-=100vh"},25),h=y.duration(),function(){var t=h;y.call(function e(){y.remove(e),y.to(a,125,{top:"-="+100*a.getBoundingClientRect().height/window.innerHeight+"vh"},t)},null,null,t)}(),y.to(o,300,{left:"-="+(o.scrollWidth-window.innerWidth)+"px"},h),y.to(a,200,{left:"-=100vw"}),y.to(a.query("div"),100,{opacity:0},"-=100"),y.set(a,{display:"none"}),y.to(n,50,{opacity:1},"-=75"),h=y.duration(),y.to([n,o],200,{left:"-=100vw"},h),y.set([n,o],{display:"none"}),y.to(l,200,{left:"-=100vw"},h),y.to([s,r],50,{opacity:1}),y.to(l,100,{top:"-=100vh"}),h=y.duration()-25,y.set(l,{display:"none"},h+100),y.to(f,100,{left:"+=50vw"},h),y.set(f,{className:"+=solid"},h+100),y.call(function t(){y.remove(t),y.to(f,350,{top:"-="+(100*f.getBoundingClientRect().height/window.innerHeight-100)+"vh"},h+150)},null,null,h),y.to(d,100,{left:"-=50vw"},h),y.to([d,c],75,{left:"-=50vw"},h+200),y.set(d,{display:"none"},h+275),y.to([c,p],75,{left:"-=50vw"},h+400),y.set(c,{display:"none"},h+475),e.addEventListener("scroll-event",function(t){var e=t.detail.vh;return y.seek(Math.max(0,e),!1)})}function s(){var t=document.getElementById("section-jacksonville"),e=t.query(".panorama"),o=t.query(".copy-opening"),n=t.query(".feature"),i=n.query("h1"),a=n.query("picture:nth-of-type(2) img"),l=t.query("article"),r=t.querySelectorAll(".slide")[0],s=t.querySelectorAll(".slide")[1],d=t.querySelectorAll(".slide")[2],c=t.query(".video-container"),p=new TimelineLite({paused:!0});TweenLite.set([i,a],{opacity:0}),TweenLite.set([e,c],{top:"100vh"});var f=0;p.call(function(){return u(c)},null,null,f),p.to(c,100,{top:"-=100vh"},f),p.call(function(){return v(c)}),p.to(c,100,{top:"-=100vh"},"+=50"),p.call(function(){return u(c)},null,null),p.to(e,100,{top:"-=100vh"},f+25),f=p.duration(),p.to(e,200,{left:"-="+(e.scrollWidth-window.innerWidth)+"px"},f),p.to(o,125,{top:"-="+o.offsetHeight},f),f=p.duration(),p.to(o,200,{left:"-=100vw"},f),p.to(o.query("div"),100,{opacity:0},f),p.set(o,{display:"none"}),f=p.duration()-75,p.to(e,200,{left:"-=100vw"},f),p.to(n,200,{left:"-=100vw"},f),p.set(e,{display:"none"}),p.to([i,a],50,{opacity:1}),f=p.duration(),p.to(n,100,{top:"-=100vh"},f+50),p.set(n,{display:"none"}),f=p.duration()-25,p.to(l,100,{left:"+=50vw"},f),p.to(r,100,{left:"-=50vw"},f),p.set(l,{className:"+=solid"}),p.call(function t(){p.remove(t),p.to(l,350,{top:"-="+(100*l.getBoundingClientRect().height/window.innerHeight-100)+"vh"},f+125)},null,null,f),p.to([r,s],75,{left:"-=50vw"},f+200),p.set(r,{display:"none"}),p.to([s,d],75,{left:"-=50vw"},f+350),p.set(s,{display:"none"}),p.to([l,d],100,{top:"-=100vh"},"+=100"),TweenLite.set(t,{height:p.duration()-100+"vh"}),t.addEventListener("scroll-event",function(t){var e=t.detail.vh;p.seek(Math.max(0,e),!1)})}function d(){var t=document.getElementById("section-atlanta"),e=t.query(".panorama"),o=t.query(".copy-opening"),n=t.query(".feature"),i=n.query("h1"),a=t.query("article"),l=t.queryAll(".slide"),r=l[0],s=l[1],d=l[2],c=l[3],p=t.query(".video-container"),f=new TimelineLite({paused:!0});TweenLite.set(i,{opacity:0}),TweenLite.set([e,p],{top:"100vh"});var y=0;f.call(function(){return u(p)},null,null,y),f.to(p,100,{top:"-=100vh"},y),f.call(function(){return v(p)}),f.to(p,100,{top:"-=100vh"},"+=50"),f.call(function(){return u(p)},null,null),f.to(e,100,{top:"-=100vh"},y+25),y=f.duration(),f.to(e,200,{left:"-="+(e.scrollWidth-window.innerWidth)+"px"},y),f.to(o,125,{top:"-="+o.offsetHeight},y),y=f.duration(),f.to(o,200,{left:"-=100vw"},y),f.to(o.query("div"),100,{opacity:0},y),f.set(o,{display:"none"}),y=f.duration()-75,f.to(e,200,{left:"-=100vw"},y),f.to(n,200,{left:"-=100vw"},y),f.set(e,{display:"none"}),f.to(i,50,{opacity:1}),y=f.duration(),f.to(n,100,{top:"-=100vh"},y+50),f.set(n,{display:"none"}),y=f.duration()-25,f.to(a,100,{left:"+=50vw"},y),f.to(r,100,{left:"-=50vw"},y),f.set(a,{className:"+=solid"}),f.call(function t(){f.remove(t),f.to(a,350,{top:"-="+(100*a.getBoundingClientRect().height/window.innerHeight-100)+"vh"},y+125)},null,null,y),f.to([r,s],75,{left:"-=50vw"},y+200),f.set(r,{display:"none"}),f.to([s,d],75,{left:"-=50vw"},y+300),f.set(s,{display:"none"}),f.to([d,c],75,{left:"-=50vw"},y+400),f.set(d,{display:"none"}),f.to([a,c],100,{top:"-=100vh"},"+=50"),TweenLite.set(t,{height:f.duration()-100+"vh"}),t.addEventListener("scroll-event",function(t){var e=t.detail.vh;return f.seek(Math.max(0,e),!1)})}function c(){var t=document.getElementById("section-houston"),e=t.query(".panorama"),o=t.query(".copy-opening"),n=t.query(".feature"),i=n.query("h1"),a=n.query("picture:nth-of-type(2) img"),l=t.query("article"),r=t.querySelectorAll(".slide")[0],s=t.querySelectorAll(".slide")[1],d=t.querySelectorAll(".slide")[2],c=t.query(".video-container"),p=new TimelineLite({paused:!0});TweenLite.set([i,a],{opacity:0}),TweenLite.set(c,{top:"100vh"});var f=150;p.call(function(){return u(c)},null,null,f),p.to(c,100,{top:"-=100vh"},f),p.call(function(){return v(c)}),p.to(c,100,{top:"-=100vh"},"+=50"),p.call(function(){return u(c)},null,null),f=p.duration(),p.to(e,200,{left:"-="+(e.scrollWidth-window.innerWidth)+"px"},f),p.to(o,125,{top:"-="+o.offsetHeight},f),f=p.duration(),p.to(o,200,{left:"-=100vw"},f),p.to(o.query("div"),100,{opacity:0},f),p.set(o,{display:"none"}),f=p.duration()-75,p.to(e,200,{left:"-=100vw"},f),p.to(n,200,{left:"-=100vw"},f),p.set(e,{display:"none"}),p.to([i,a],50,{opacity:1}),f=p.duration(),p.to(n,100,{top:"-=100vh"},f+50),p.set(n,{display:"none"}),f=p.duration()-25,p.to(l,100,{left:"+=50vw"},f),p.to(r,100,{left:"-=50vw"},f),p.set(l,{className:"+=solid"}),p.call(function t(){p.remove(t),p.to(l,350,{top:"-="+(100*l.getBoundingClientRect().height/window.innerHeight-100)+"vh"},f+125)},null,null,f),p.to([r,s],75,{left:"-=50vw"},f+200),p.set(r,{display:"none"}),p.to([s,d],75,{left:"-=50vw"},f+350),p.set(s,{display:"none"}),p.to([l,d],100,{top:"-=100vh"},"+=100"),TweenLite.set(t,{height:p.duration()-100+"vh"}),t.addEventListener("scroll-event",function(t){var e=t.detail.vh;p.seek(Math.max(0,e),!1)})}function u(t){null!==t.video&&(t.classList.contains("ready")?t.video.pauseVideo():t.video.addEventListener("onReady",function e(){t.video.removeEventListener("onReady",e),t.video.pauseVideo()}))}function v(t){var e=t.closest("section");window.requestAnimationFrame(function(){if(e.classList.contains("top-above-vp-bottom")&&e.classList.contains("bottom-below-vp-top")){var o=t.getBoundingClientRect(),n=o.top,i=o.bottom;n<window.innerHeight&&i>0&&(t.video?"function"==typeof t.video.playVideo&&t.video.playVideo&&t.video.playVideo():t.dispatchEvent(new CustomEvent("click")))}})}function p(){Array.from(document.querySelectorAll("section:not(#section-intro)")).forEach(function(t){var e=t.query(".video-container"),o=e.query(".video-embed"),n=t.getAttribute("data-event-label");e.video=null,e.addEventListener("click",function(){ga("send",{hitType:"event",eventCategory:"video",eventAction:"activated",eventLabel:n})},{once:!0}),e.addEventListener("click",function(){var t=e.video,i=!1,a=!1;null!==t?t.getPlayerState()===YT.PlayerState.PAUSED?t.playVideo():t.pauseVideo():((t=new window.YT.Player(o,{width:"100%",height:"100%",videoId:e.getAttribute("data-video-id"),playerVars:{fs:0,rel:0}})).addEventListener("onStateChange",function(o){switch(o.data){case YT.PlayerState.PAUSED:e.classList.add("paused"),i||(i=!0,ga("send",{hitType:"event",eventCategory:"video",eventAction:"paused",eventLabel:n,eventValue:+t.getCurrentTime()}));break;case YT.PlayerState.ENDED:ga("send",{hitType:"event",eventCategory:"video",eventAction:"ended",eventLabel:n});break;case YT.PlayerState.PLAYING:e.classList.remove("paused"),a||(a=!0,ga("send",{hitType:"event",eventCategory:"video",eventAction:"playing",eventLabel:n}))}}),t.addEventListener("onReady",function(){e.classList.add("ready"),t.playVideo()})),e.video=t})})}var f=matchMedia("(max-width: 1024px)"),y=navigator.userAgent.indexOf("MSIE ")>=0||navigator.userAgent.indexOf("Trident/")>=0||navigator.userAgent.indexOf("Edge/")>=0,h=void 0,m=void 0,g=void 0;Promise.all([new Promise(function(t){return document.addEventListener("DOMContentLoaded",t)}),new Promise(function(t){var e=document.query("script"),o=document.createElement("script");o.src="https://www.youtube.com/iframe_api",e.parentNode.insertBefore(o,e),window.onYouTubeIframeAPIReady=t}),new Promise(function(t){return WebFont.load({classes:!0,custom:{families:["BalegaLTStd"],urls:["fonts/BalegaLTStd.css"]},active:t})})]).then(t)}();